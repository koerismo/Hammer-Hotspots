#include <Windows.h>
#include <stdio.h>
#include "module.h"

// Use with frida:
// var testModule = Module.load(`C:\\Users\\Jadon\\Documents\\GitHub\\Hammer-Hotspot\\build\\Debug\\hamspot.dll`);

bool WINAPI DllMain( HINSTANCE hModule, DWORD loadReason, LPVOID lpReserved ) {
    printf("DllMain called with arg %i\n", loadReason);

    if (loadReason == DLL_PROCESS_ATTACH) {
        printf("Library loaded!\n");
        Patcher::Patch();
    }

    if (loadReason == DLL_PROCESS_DETACH) {
        printf("Library detatching...\n");
        Patcher::Unpatch();
    }
}
