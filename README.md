# Hammer Hotspots
A plugin to add [hotspotting](https://developer.valvesoftware.com/wiki/Half-Life:_Alyx_Workshop_Tools/Level_Design/Hotspot_Texturing) to Hammer World Editor.

> [!WARNING]
> This plugin is currently nonfunctional!

Progress Checklist:

- [X] Algorithm
    - [X] Aspect ratio checking
    - [X] Aspect rotation matching<sup>1</sup>
    - [X] World-space size matching
    - [X] Limited-error randomization
- [ ] Integration
    - [ ] Accesses VTF data
    - [ ] Loads rect information from Hotspot resource
    - [X] Overrides "fit" functionality when a rectmap is available<sup>2</sup>
    - [X] Detects face boundaries
    - [X] Matches and applies rects
    - [ ] Applies rotated rects non-destructively

**1**. Rotation flags are forced off for now due to lack of proper implementation support.

**2**. Since VTF parsing is incomplete, materials are assumed to have the DreamUV example layout.

## Creating RectMaps

This plugin uses a binary format to store the locations of each hotspot rect. These follow a relatively simple [specification](./generator/specification.md), and can be generated by the provided `generator` module.

This program takes a single image parameter, and generates a `.rect` file of the same name. Rects are created at the bounds wherever there are unique colors. Input images should be composed of rectangles of solid colors where each hotspot rect should be. Make sure no two rectangles have the same color!

```
npm run generate <imagePath>
```

## Using RectMaps

> [!WARNING]
> This, and I cannot stress this enough, will not work. Because the plugin isn't finished.

Hotspot maps will automatically be applied when using the "fit" button if the current texture contains hotspot information.
